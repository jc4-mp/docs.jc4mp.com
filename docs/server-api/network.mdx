# Network

These network APIs allow you to send data to players and receive data from players.

## Global Methods

#### `Net.SendToTarget(player: Player, event: string, data: any)`

Triggers a corresponding client event for a specific player in any resource with the same event name. `data` is not required. Any type of data except functions is valid, including strings, numbers, tables, metatables, etc.

#### `Net.SendToTargets(players: Player[], event: string, data: any)`

Triggers a corresponding client event for a table of players.

#### `Net.Send(event: string, data: any)`

Triggers a corresponding client event for all players.

Example usage:

```lua
-- resources/test/server/main.lua

Net.Send("BroadcastEvent", { value = "hello all!"})
```

A corresponding client script in any resource can listen for this event:
```lua
-- resources/test/client/main.lua

Net.AddEvent("BroadcastEvent", function(args)
    print("Received: " .. tostring(args.value))
end)
```


#### `Net.AddEvent(event: string, handler: function)`

Adds an event handler for a specific network event with a string name.

Example (on the server):
```lua
-- resources/test/server/main.lua

Net.AddEvent("TestEventFromClient", function(args)
    print("Received: " .. tostring(args.value))
end)
```

And the client can send events to trigger the client event:
```lua
-- resources/test/client/main.lua

Net.Send("TestEventFromClient", { value = "hello"})
```

**Another example**: To get the player who sent the event, you can use `Net.Sender()`:

```lua
-- resources/test/client/main.lua
Net.Send("PrintMySkin")
```

```lua
-- resources/test/server/main.lua

-- Get the PlayerClient that sent the event, get NetPlayer from it, and print their skin
Net.AddEvent("PrintMySkin", function()
    local player = Net.Sender():GetNetPlayer()
    print("Player skin: " .. tostring(player:GetSkin()))
end)
```


#### `Net.Sender(): PlayerClient`

Returns the [PlayerClient](./playerclient.mdx) that sent the event. This is only valid within the event handler.

Example:

```lua
-- resources/test/server/main.lua

Net.AddEvent("PrintMyNick", function()
    local player = Net.Sender()
    print("Player: " .. tostring(player:GetNick()) .. " sent the event")
end)
```



#### `Net.RemoveEvent(event: string)`

Removes a network event handler.
